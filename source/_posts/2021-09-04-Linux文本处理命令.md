---
title: Linux文本处理命令
date: 2021-09-04 14:18:56
tags: [Linux, 文本处理]

---

## sed

sed 命令是利用脚本来处理文本文件。sed 可依照脚本的指令来处理、编辑文本文件。

### 语法：

```
sed [-hnV][-e<script>][-f<script文件>][文本文件]
-e <script>或--expression=<script> -f<script文件>或--file=<script文件> -n或--quiet或--silent 仅显示script处理后的结果。
```

### 动作说明：

a ：新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)
c ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行
d ：删除，因为是删除啊，所以 d 后面通常不接任何内容
i ：插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；
p ：打印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～
s ：取代，可以直接进行取代的工作，通常这个 s 的动作可以搭配正规表示法

### 常用：

显示3行到9行的数据：

```
sed -n '3,9p' access.log
```

显示包含02-19到包含02-20行的内容：

```
sed -n '/02-19/,/02-20/p' access.log
```

显示匹配字符串的行号：

```
sed -n '/http/p' access.log
```



## grep

grep命令用于查找文件里符合条件的字符串。

### 语法：

grep  [选项]  ”模式“  [文件]

### 参数说明：

-E ：开启扩展（Extend）的正则表达式。
-i ：忽略大小写（ignore case）。
-v ：反过来（invert），只打印没有匹配的，而匹配的反而不打印。
-n ：显示行号
-w ：被匹配的文本只能是单词，而不能是单词中的某一部分
-c ：显示总共有多少行被匹配到了，而不是显示被匹配到的内容，注意如果同时使用-cv选项是显示有多少行没有被匹配到。
-o ：只显示被模式匹配到的字符串。		
--color :将匹配到的内容以颜色高亮显示。

### 模式：

直接匹配文本
匹配正则表达式

### 常用：

显示所有包含每个字符串至少有5个连续小写字符的字符串的行：			
grep '[a-z]\{5\}' acclog.log
打印出不以英文字开头的行： 

```
grep '^[^a-zA-Z]' test.txt
```



## awk

awk是一个强大的文本分析工具，相对于grep的查找，sed的编辑，awk在其对数据分析并生成报告时，显得尤为强大。简单来说awk就是把文件逐行的读入，以空格为默认分隔符将每行切片，切开的部分再进行各种分析处理。

### 语法： 

```
awk '{pattern + action}' {filenames}
```

### 常用：

搜索/etc/passwd有root关键字的所有行：

```
awk  '/root/' /etc/passwd
```

统计/etc/passwd:文件名，每行的行号，每行的列数，对应的完整行内容:

```
awk  -F ':'  '{print "filename:" FILENAME ",linenumber:" NR ",columns:" NF ",linecontent:"$0}' /etc/passwd
```
